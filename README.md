# golang-tutorial-calculator

Go言語で作成された対話型の電卓。
ターミナル上で数値と演算子を入力すると、計算結果が表示され、`log.txt` ファイルにログとして記録されます。


## 実行方法

1. Goがインストールされた環境で、ターミナルを開きます。
2. ソースコードがあるディレクトリへ移動します。
3. 以下のコマンドでプログラムを実行します：

```bash
go run main.go
```

## 使用方法

1. 最初の数値を入力

```
Please input first argument
> 10
```

2. 演算子を入力（対応:+, -, *, /）
```
Please input operator
> *
```

3. 次の数値を入力
```
Please input second argument
> 5
```

4. 結果の表示
```
10 * 5 = 50.000000
```

ログファイルにも書き込まれる
```
[2025-07-09 15:30:01] 10 * 5 = 50.000000
```

5. 計算を続けるかどうか
```
Do you want to continue? (y/n)
> y
```

"n"の入力で終了できる。


## 学習内容

### bufioパッケージ
バッファ付きI/Oを扱うための標準ライブラリ
キーボード入力やファイルなどから行単位・単語単位で読み取るために使用する

#### 使用例
```
scanner := bufio.NewScanner(os.Stdin)
scanner.Scan() // 1行読み取る
text := scanner.Text() // 入力された文字列を取得
```

#### メリット
- `fmt.Scanln()`はスペース区切りに弱く、空白や改行で止まってしまう可能性がある
- `bufio.Scanner`は改行までを一行全体として扱うことが可能


### 標準入力/出力

`os.Stdin`
: ユーザーの標準入力（キーボードなど）を受け取る

`os.Stdout`
: ユーザーに出力を（ターミナルなどで）見せる

`io.MultiWriter`
: 複数の出力先に同時に書き出すことが可能


### ファイル操作

`os.Create`
: 作成、または既存のファイルを上書き。読み取り不可。

`os.OpenFile`
: 読み取り・上書き・追記を選択することが可能。


#### `os.OpenFile`の引数の説明

| flag | 説明 |
| --- | --- |
| `os.O_RDONLY` | 読み取り専用 |
| `os.O_WRONLY` | 書き込み専用 |
| `os.O_RDWR` | 読み書き |
| `os.O_APPEND` | ファイルの最後に追記する |
| `os.O_CREATE` | ファイルが存在しない場合、作成する |
| `os.O_TRUNC` | ファイルが存在する場合、元内容をクリアする |
| `os.O_EXCL` | ファイルが存在する場合、エラーが起こる |


### float32, 64の計算精度について
[参考](https://www.youtube.com/watch?v=PZRI1IfStY0)

#### 有効数字（おおよそ）
float32: 8桁
float64: 15桁
=> 精度はfloat64の方が断然高いので、特にメモリ制限がなければfloat64を使用する

#### 比較
浮動小数点の比較を行う場合はイプシロン値(誤差）の範囲内になるのかを確認する必要あり
=> スピード>正確さの場合（+有効数字がわかっている場合）はintで計算して最後に/100などを行う
=> 精密さが重要な場合はdecimalパッケージ



どんな型でもOK




